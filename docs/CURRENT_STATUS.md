# –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ "–°–µ–≤–µ—Ä–Ω–∞—è –ö–æ—Ä–∑–∏–Ω–∞"

## üìÖ –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 23 –∞–≤–≥—É—Å—Ç–∞ 2025

## üéØ –¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞
**‚úÖ –ó–ê–í–ï–†–®–ï–ù–û: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Ç–∏—è–º–∏**

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã.

## üîÑ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–≤ —ç—Ç–æ–º —á–∞—Ç–µ)

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é:
1. **API admin-batches –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç —Å—É–º–º –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ ‚úÖ
2. **Webhook'–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã** - –∑–∞–∫–∞–∑—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ —Å—Ç–∞—Ç—É—Å `paid` ‚úÖ
3. **"–ú–∞—à–∏–Ω–∞ —É–µ—Ö–∞–ª–∞" —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** - –º–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ `paid ‚Üí shipped` —Å SMS ‚úÖ
4. **"–ú–∞—à–∏–Ω–∞ –ø—Ä–∏–µ—Ö–∞–ª–∞" —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** - –º–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ `shipped ‚Üí delivered` —Å SMS ‚úÖ
5. **SMS –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã** - –æ–¥–∏–Ω –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ = –æ–¥–Ω–æ SMS –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–∫–∞–∑–æ–≤ ‚úÖ

## üöÄ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ:
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ SMS
- **–ö–∞—Ç–∞–ª–æ–≥**: –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–æ–≤, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
- **–ö–æ—Ä–∑–∏–Ω–∞**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º, —Ä–∞—Å—á–µ—Ç —Å—É–º–º—ã
- **–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞**: CheckoutScreen —Å –≤—ã–±–æ—Ä–æ–º –∞–¥—Ä–µ—Å–∞
- **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤**: –ó–∞–∫–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`
- **–ê–≤—Ç–æ–ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–∞—Ä—Ç–∏—è–º**: –ó–∞–∫–∞–∑—ã –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∞–∫—Ç–∏–≤–Ω—É—é –∑–∞–∫—É–ø–∫—É
- **–ü–ª–∞—Ç–µ–∂–∏**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ÆKassa + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ webhook'–∏
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ `pending ‚Üí paid` —á–µ—Ä–µ–∑ webhook'–∏
- **–ê–¥–º–∏–Ω–∫–∞**: 
  - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∞—Ä—Ç–∏–π —Å –∑–∞–∫–∞–∑–∞–º–∏
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–∫–∞–∑–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –∑–∞–∫—É–ø–æ–∫
  - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Å—É–º–º—ã
  - **–ö–Ω–æ–ø–∫–∞ "–ú–∞—à–∏–Ω–∞ —É–µ—Ö–∞–ª–∞"** - –º–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ `paid ‚Üí shipped`
  - **–ö–Ω–æ–ø–∫–∞ "–ú–∞—à–∏–Ω–∞ –ø—Ä–∏–µ—Ö–∞–ª–∞"** - –º–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ `shipped ‚Üí delivered`
  - **SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø—Ä–∏ —Å–º–µ–Ω–µ —Å—Ç–∞—Ç—É—Å–æ–≤ (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)

## üéâ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- **–°—É–º–º—ã –≤ –∞–¥–º–∏–Ω–∫–µ** - API `admin-batches` —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—É–º–º—ã –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- **Webhook'–∏ –æ—Ç –ÆKassa** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–∏—è–º–∏** - –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ—Ç —Å–±–æ—Ä–∞ –¥–µ–Ω–µ–≥ –¥–æ –¥–æ—Å—Ç–∞–≤–∫–∏
- **SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - —É–º–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –æ–¥–∏–Ω –Ω–æ–º–µ—Ä

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–æ–º–µ–Ω–æ–≤

- **`sevkorzina.ru`** (31.31.197.13) - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç —Å SSL ‚úÖ
- **`app.sevkorzina.ru`** (–±–µ–∑ SSL) - –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è iOS ‚úÖ
- **`api.sevkorzina.ru`** (84.201.149.245) - API —Å SSL –¥–ª—è webhook'–æ–≤ ‚úÖ
- **Backend API:** Node.js –Ω–∞ –ø–æ—Ä—Ç—É 3000 ‚úÖ
- **Nginx:** reverse proxy HTTPS:443 ‚Üí HTTP:3000 ‚úÖ

## üìã –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ:
1. **–í—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–∞
2. **HTTPS –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - webhook'–∏ –æ—Ç –ÆKassa —Ä–∞–±–æ—Ç–∞—é—Ç 
3. **–ê–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏** - –ø–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–∏—è–º–∏ –∏ –∑–∞–∫–∞–∑–∞–º–∏
4. **SMS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞—é—Ç
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã

### üîÑ –û—Å—Ç–∞–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
1. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ÆKassa –Ω–∞ –±–æ–µ–≤–æ–π —Ä–µ–∂–∏–º** - –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
2. **End-to-end —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–ª–∞—Ç–µ–∂–∞–º–∏** - —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞  
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–ø–æ –∂–µ–ª–∞–Ω–∏—é):
1. **–ö–Ω–æ–ø–∫–∞ "–û—Ç–∫–∞—Ç–∏—Ç—å –ø–∞—Ä—Ç–∏—é"** - –≤–æ–∑–≤—Ä–∞—Ç –¥–µ–Ω–µ–≥ —á–µ—Ä–µ–∑ –ÆKassa API
2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –≤ –∞–¥–º–∏–Ω–∫–µ
3. **Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ SMS
4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞–º–∏** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏

## üí° –ó–∞–º–µ—Ç–∫–∏ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏ –Ω–∞—á–∞–ª–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
> "–ü—Ä–∏–≤–µ—Ç! –ü—Ä–æ–µ–∫—Ç –°–µ–≤–µ—Ä–Ω–∞—è –ö–æ—Ä–∑–∏–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω. –í—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç: webhook'–∏, –∞–¥–º–∏–Ω–∫–∞ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–∞—Ä—Ç–∏—è–º–∏, SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è. –ì–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω."

### –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã:
- **Webhook'–∏**: –†–∞–±–æ—Ç–∞—é—Ç ‚úÖ (`https://api.sevkorzina.ru/api/payments/webhook`)
- **–ê–¥–º–∏–Ω–∫–∞**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ ‚úÖ
- **SMS**: –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã ‚úÖ
- **–ü–ª–∞—Ç–µ–∂–∏**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ÆKassa —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
# –¢–µ—Å—Ç webhook'–∞
curl -X POST https://api.sevkorzina.ru/api/payments/webhook \
  -H "Content-Type: application/json" \
  -d '{"event": "payment.succeeded", "object": {"id": "test", "status": "succeeded", "metadata": {"order_id": "–ù–û–ú–ï–†_–ó–ê–ö–ê–ó–ê"}}}'

# –¢–µ—Å—Ç –∞–¥–º–∏–Ω—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
curl -X POST https://api.sevkorzina.ru/api/admin/batches/ID/ship-orders \
  -H "Authorization: Bearer –ê–î–ú–ò–ù_–¢–û–ö–ï–ù"
```

---

**üéâ –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã.**